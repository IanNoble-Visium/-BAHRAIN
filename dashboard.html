<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TruContext Demo Dashboard</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script src="https://unpkg.com/cytoscape@3.26.0/dist/cytoscape.min.js"></script>
  <script>
    // Simple access control: require role in localStorage
    (function(){
      var role = localStorage.getItem('tc_role');
      if (!role) {
        // No role -> bounce to main site
        window.location.replace('/');
      }
    })();
  </script>

</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <a href="/">
          <img src="/images/Improved Visium Tech LOGO.png" alt="Visium Technologies" class="logo">
        </a>
      </div>
      <div class="nav-menu">
        <a href="/" class="nav-link">Marketing Site</a>
      </div>
      <div class="nav-cta">
        <span id="roleBadgeTop" class="role-badge"></span>
      </div>
    </div>
  </nav>

  <section id="demo" class="demo" style="padding-top:96px;">
    <div class="container">
      <div class="breadcrumbs">Demo</div>
      <div class="section-header">
        <h2 class="section-title">Interactive Demo Dashboard</h2>
        <p class="section-subtitle">Real-time sample analytics for Bahrain.</p>
      </div>

      <div class="demo-container">
        <div class="demo-controls">
          <div class="control-group">
            <label>View:</label>
            <select id="demo-view">
              <option value="executive">üìä Executive Dashboard</option>
              <option value="cybersecurity">üõ°Ô∏è Cybersecurity Overview</option>
              <option value="traffic">üö¶ Traffic Analytics</option>
              <option value="environment">üå¨Ô∏è Environment & Air Quality</option>
              <option value="water">üíß Water Management</option>
              <option value="energy">‚ö° Energy & Renewables</option>
              <option value="infrastructure">üèóÔ∏è Infrastructure Projects</option>
              <option value="health">üè• Health Monitoring</option>
            </select>
          </div>
          <div class="control-group">
            <label>Time Range:</label>
            <input type="search" id="globalSearch" class="search-input" placeholder="Search assets, alerts, locations..." />
            <div class="time-buttons">
              <button class="time-btn active" data-range="24h">24h</button>
              <button class="time-btn" data-range="7d">7d</button>
              <button class="time-btn" data-range="30d">30d</button>
            </div>
            <span id="roleBadge" class="role-badge" title="Current role"></span>
          </div>
          <div class="live-indicator"><span class="live-dot"></span><span>Live Data</span></div>
        </div>

        <div id="kpiRow" class="kpi-row" style="display: grid; grid-template-columns: repeat(4, minmax(0,1fr)); gap: 12px; margin-bottom: 1rem;">
          <div class="kpi-tile"><div class="kpi-label">KPI 1</div><div class="kpi-value">‚Äî</div></div>
          <div class="kpi-tile"><div class="kpi-label">KPI 2</div><div class="kpi-value">‚Äî</div></div>
          <div class="kpi-tile"><div class="kpi-label">KPI 3</div><div class="kpi-value">‚Äî</div></div>
          <div class="kpi-tile"><div class="kpi-label">KPI 4</div><div class="kpi-value">‚Äî</div></div>
        </div>

        <div class="dashboard-grid">
          <div class="dashboard-card">
            <h4>Network Entities</h4>
            <div class="metric-value"><span class="number" data-target="15847">0</span><span class="trend positive">+12%</span></div>
            <p class="metric-label">All monitored assets</p>
          </div>

          <div class="dashboard-card">
            <h4>Active Relationships</h4>
            <div class="metric-value"><span class="number" data-target="89234">0</span><span class="trend positive">+8%</span></div>
            <p class="metric-label">Network connections</p>
          </div>

          <div class="dashboard-card">
            <h4>Threat Level</h4>
            <div class="metric-value"><span class="status-indicator low">LOW</span></div>
            <p class="metric-label">Overall risk assessment</p>
          </div>

          <div class="dashboard-card">
            <h4>System Health</h4>
            <div class="metric-value"><span class="health-score">98%</span><span class="trend positive">+2%</span></div>
            <p class="metric-label">Platform performance</p>
          </div>

          <div class="dashboard-card chart-card">
            <h4>Security Trends (24h)</h4>
            <canvas id="securityChart"></canvas>
          </div>

          <div class="dashboard-card chart-card">
            <h4>Traffic Flow Analysis</h4>
            <canvas id="trafficChart"></canvas>
          </div>

          <div class="dashboard-card graph-card">
            <h4>Network Topology</h4>
            <div id="cyGraph" class="network-visualization"></div>
          </div>

          <div class="alert-controls">
            <label>Severity:</label>
            <select id="alertSeverityFilter">
              <option value="all">All</option>
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
            <div class="control-group" style="margin-left:auto;">
              <label>Traffic Heatmap:</label>
              <select id="heatToggle">
                <option value="off">Off</option>
                <option value="on">On</option>
              </select>
            </div>
            <span id="roleBadge" class="role-badge" title="Current role"></span>
          </div>

          <div class="dashboard-card">
            <h4>Bahrain Map</h4>
            <div id="bhMap" class="map-container"></div>
          </div>

          <div class="dashboard-card video-card">
            <h4>Live Dashboard Feed</h4>
            <video id="dashboardVideo" autoplay muted loop playsinline controlslist="nodownload">
              <source src="/videos/Realtime_data_flow_202508200300_dtvgx.mp4" type="video/mp4">
              <source src="/videos/Dynamic_City_Map_Video_Ready.mp4" type="video/mp4">
            </video>
          </div>

          <div class="dashboard-card alert-card">
            <h4>Recent Alerts</h4>
            <div class="alert-list">
              <div class="alert-item low" data-severity="low">
                <span class="alert-time">14:32</span>
                <span class="alert-message">Traffic congestion detected - King Faisal Highway</span>
                <div class="actions"><button class="ack-btn">Acknowledge</button><button class="resolve-btn">Resolve</button></div>
              </div>
              <div class="alert-item medium" data-severity="medium">
                <span class="alert-time">13:45</span>
                <span class="alert-message">Unusual network activity - Financial District</span>
                <div class="actions"><button class="ack-btn">Acknowledge</button><button class="resolve-btn">Resolve</button></div>
              </div>
              <div class="alert-item low" data-severity="low">
                <span class="alert-time">12:18</span>
                <span class="alert-message">Water pressure anomaly - Manama Sector 7</span>
                <div class="actions"><button class="ack-btn">Acknowledge</button><button class="resolve-btn">Resolve</button></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="footer">
    <div class="container">
      <div class="footer-bottom">
        <div class="footer-legal">
          <p>&copy; 2025 Visium Technologies, Inc. All rights reserved.</p>
        </div>
      </div>
    </div>
  </footer>

  <script type="module" src="main.js"></script>
</body>
</html>

